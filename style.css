/* ====== Variables y resets básicos ====== */
:root { --bg: #f6f3ee; }

* {
  box-sizing: border-box;
  -webkit-tap-highlight-color: transparent;
}

html, body {
  margin: 0;
  height: 100%;
  background: var(--bg);
  overflow: hidden;               /* evita scroll accidental durante el flip */
}

body {
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  overscroll-behavior: contain;   /* no “rebota” en móvil */
  touch-action: none;             /* el gesto principal lo controla el flip */
}

/* ====== Contenedor del libro (flipbook) ======
   - position: fixed + inset:0 + 100svh evita la banda blanca superior
   - svh usa el “small viewport height” estable en móviles */
#book {
  position: fixed;
  inset: 0;               /* top:0; right:0; bottom:0; left:0 */
  width: 100vw;
  height: 100svh;
  background: transparent;
  touch-action: pan-y;    /* permitimos desplazamiento vertical mínimo si hace falta */
}

/* ====== Zonas táctiles para tap (opcionales) ====== */
.tap-zone {
  position: fixed;
  top: 0;
  bottom: 0;
  width: 50vw;
  z-index: 20;
}
#tap-left  { left: 0; }
#tap-right { right: 0; }

/* ====== Fallback (si la librería no carga) ====== */
#fallback {
  display: none;
  position: fixed;
  inset: 0;
  width: 100vw;
  height: 100svh;
  overflow: hidden;
  background: var(--bg);
}
#fallback .strip {
  display: flex;
  height: 100%;
}

/* ====== Imágenes (nitidez + proporción correcta) ======
   Si en tu implementación el flip inserta <img> dentro de #book,
   estas reglas aseguran nitidez y evitan estiramientos. */
#book img,
#fallback img {
  height: 100%;           /* escala por alto, mantiene proporción */
  width: auto;
  object-fit: contain;    /* no recorta, no deforma */
  display: block;
  margin: 0 auto;

  /* máxima nitidez en texto/bordes */
  image-rendering: -webkit-optimize-contrast;
  image-rendering: crisp-edges;
  image-rendering: pixelated;
  -ms-interpolation-mode: nearest-neighbor;

  /* asegurar renderizado limpio en GPU */
  transform: translateZ(0);
  backface-visibility: hidden;
}

/* ====== Mensaje pequeño (modo simple / avisos) ====== */
#msg {
  position: fixed;
  top: 10px;
  left: 50%;
  transform: translateX(-50%);
  background: #fff;
  border: 1px solid #eee;
  border-radius: 10px;
  padding: 8px 12px;
  font-size: 14px;
  z-index: 30;
  display: none;
}

/* ====== Accesibilidad y pulido ====== */
@media (prefers-reduced-motion: reduce) {
  /* si el usuario pide menos animación, evitamos transiciones fuertes */
  * { scroll-behavior: auto; }
}

/* En paisaje extremo, limitamos el ancho para evitar “aplastar” la página */
@media (orientation: landscape) and (max-height: 520px) {
  #book, #fallback { height: 100vh; } /* en landscape a veces 100svh no es necesario */
  #book img, #fallback img {
    max-height: 100%;
    width: auto;
  }
}

/* Safe areas en iOS (por si instalas como PWA y ocultas barras) */
body {
  padding:
    env(safe-area-inset-top, 0)
    env(safe-area-inset-right, 0)
    env(safe-area-inset-bottom, 0)
    env(safe-area-inset-left, 0);
}
